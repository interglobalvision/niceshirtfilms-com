function videoBackgrounds(){$(".home-news").each(function(e,i){var t=$(i).find(".u-holder"),a=$(i).find("video");if(a.css("min-width",""),t.height()>a.height()){var o=t.height()/a.height()*103;a.css("min-width",o+"%")}})}function lazyLoadBackgrounds(){$(".js-lazy-background").each(function(e,i){$(window).width()>extraLargeImagesTriggerWidth?$(i).css({"background-image":"url("+$(i).data("thumb-extra-large")+")"}):$(window).width()>largeImagesTriggerWidth?$(i).css({"background-image":"url("+$(i).data("thumb-large")+")"}):$(i).css({"background-image":"url("+$(i).data("thumb")+")"})})}function layoutFixSearchInput(){var e=$("#search-form").width(),i=$("#search-label").width();$("#search-input").width(e-i-20)}function closeAllPosts(){$(".home-post").removeClass("active"),$(".post-main").each(function(e,i){i.style.height=""}),$(".home-video-player").html(""),$(".embed-holder").html(""),$(".post-copy").slideUp(fastAnimationSpeed)}function sidebarInit(){sidebarButton.on("click",function(){sidebar.hasClass("open")?(sidebar.removeClass("open"),sidebarButton.attr("class","u-pointer")):(sidebar.addClass("open"),sidebarButton.attr("class","u-pointer rotate"))})}function postsInit(){$(".post-copy-close").on("click",function(e){e.preventDefault(),$(this).parent(".post-copy").parent().removeClass("active"),closeAllPosts()}),$(".home-video .post-main").on("click",function(e){e.preventDefault(),closeAllPosts();var i=$(this).parent(),t=i.data("vimeo-id"),a=i.data("video-ratio");0===a&&(a=.5625);var o=i.width()*a;i.addClass("active"),i.find(".post-copy").slideDown(fastAnimationSpeed),i.find(".post-main").height(o),i.find(".home-video-player").height(o).html('<iframe id="home-vimeo-embed" width="100%" height="100%" src="//player.vimeo.com/video/'+t+'?api=1&autoplay=1&badge=0&byline=0&portrait=0&player_id=home-vimeo-embed" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>');var n=$("#home-vimeo-embed")[0],r=$f(n);r.addEvent("ready",function(){r.addEvent("finish",function(){i.find(".home-video-player").html("")})}),scrollTimer=setTimeout(function(){i.ScrollTo()},basicAnimationSpeed)}),$(".news-read-more .post-main").on("click",function(e){e.preventDefault(),closeAllPosts();var i=$(this).parent();if(i.find(".post-copy").slideDown(fastAnimationSpeed,function(){i.addClass("active"),scrollTimer=setTimeout(function(){i.ScrollTo()},fastAnimationSpeed+10)}),i.data("embed")){var t=JSON.parse(i.data("embed"));i.find(".embed-holder").html(t)}})}function directorInit(){if(window.onhashchange=function(){var e=window.location.hash.replace("#","");router("director",e)},window.location.hash){var e=window.location.hash.replace("#","");router("director",e)}$(".js-load-overlay-vimeo").on("click",function(){overlayVimeoPlayer.load($(this).data(),$(this).index())}),$(".js-load-overlay-image").on("click",function(){overlayImage.load($(this).children(".full-still").clone(),$(this).data(),$(this).index())}),$("#video-overlay-close").on("click",function(){overlayVimeoPlayer.close()}),$("#video-overlay-next").on("click",function(){overlayVimeoPlayer.playNext()}),$("#video-overlay-previous").on("click",function(){overlayVimeoPlayer.playPrev()}),$("#image-overlay-close").on("click",function(){overlayImage.close()}),$("#image-overlay-next, #image-overlay-viewer").on("click",function(){overlayImage.next()}),$("#image-overlay-previous").on("click",function(){overlayImage.prev()}),$("#inline-player-next").on("click",function(){inlineVimeoPlayer.playNext()}),$("#inline-player-previous").on("click",function(){inlineVimeoPlayer.playPrev()})}function router(e,i){"director"===e&&($(".director-menu-item").removeClass("active"),"play-all"===i||(0===i.indexOf("video-")?("showreel"!==$("#director-menu").attr("data-active")?(inlineVimeoPlayer.close(),$(".director-section:not(#director-showreel)").slideUp(basicAnimationSpeed),$("#director-showreel").slideDown(basicAnimationSpeed),$("#director-menu").attr("data-active","showreel")):"showreel"===i&&inlineVimeoPlayer.close(),0===i.indexOf("video-")&&(inlineVimeoPlayer.load($("#director-archive-"+i)),$("#vimeo-player").slideDown(basicAnimationSpeed),$("#director-menu").attr("data-active","showreel")),$("#director-menu-showreel").addClass("active")):"stills"===i?($("#stills-container").imagesLoaded(function(){$("#stills-container").masonry({itemSelector:".still"})}),inlineVimeoPlayer.close(),$(".director-section").slideUp(basicAnimationSpeed),$("#director-stills").slideDown(basicAnimationSpeed),$("#director-menu").attr("data-active","stills"),$("#director-menu-stills").addClass("active")):"biography"===i?(inlineVimeoPlayer.close(),$("#director-stills").slideUp(basicAnimationSpeed),$("#director-showreel").slideDown(basicAnimationSpeed),$("#director-biography").slideDown(basicAnimationSpeed),$(window).scrollTo($("#director-biography"),basicAnimationSpeed),$("#director-menu").attr("data-active","biography"),$("#director-menu-biography").addClass("active")):(inlineVimeoPlayer.close(),$("#director-menu").attr("data-active",""),$(".director-section").slideUp(basicAnimationSpeed),$("#director-showreel").slideDown(basicAnimationSpeed))))}function initializeMap(){var e=new google.maps.LatLng(51.513748,(-.139104)),i={center:e,zoom:14,scrollwheel:!1,styles:[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#01bcec"},{visibility:"on"}]}]},t=new google.maps.Map(document.getElementById("map-canvas"),i),a=$("#map-copy").html(),o=new google.maps.InfoWindow({content:a}),n=new google.maps.Marker({position:e,map:t,icon:wp_variables.themeUrl+"/img/dist/ns-mapmarker.png"});o.open(t,n),google.maps.event.addListener(n,"click",function(){o.open(t,n)}),$("#map-canvas").height(.5*$(window).height())}function ajaxBefore(){$("#main-content").fadeOut(fastAnimationSpeed),$("#sidebar li").removeClass("menu-active"),$("#sidebar").removeClass("open"),$("html").removeClass("cinema-mode")}function ajaxErrorHandler(e,i,t){console.log("ajaxy error"),console.log(t)}function ajaxDirectorSuccess(e,i){var t=$(e)[5].innerText;history.pushState(null,t,i),document.title=t;var a=$(e).find("#main-content");$("#main-content").html(a.html()),$("#main-content").fadeIn(basicAnimationSpeed),clickedMenuItem.addClass("menu-active"),lazyLoadBackgrounds(),videoBackgrounds(),lazyThumbnails=$(".lazy-thumb"),lazyBackgrounds=$(".js-lazy-background"),directorShowreelVideos=$(".director-showreel-video"),directorShowreelLength=directorShowreelVideos.length,tagFilters=$(".filter-tag"),directorInit()}function ajaxIndexSuccess(e,i){var t=$(e)[5].innerText;history.pushState(null,t,i),document.title=t;var a=$(e).find("#main-content");$("#main-content").html(a.html()),$("#main-content").fadeIn(basicAnimationSpeed),clickedMenuItem.addClass("menu-active"),lazyLoadBackgrounds(),videoBackgrounds(),postsInit()}function ajaxPageSuccess(e,i){var t=$(e)[5].innerText;history.pushState(null,t,i),document.title=t;var a=$(e).find("#main-content");$("#main-content").html(a.html()),$("#main-content").fadeIn(basicAnimationSpeed),clickedMenuItem.addClass("menu-active"),$("#map-canvas").length&&initializeMap()}var largeImagesTriggerWidth=700,extraLargeImagesTriggerWidth=1100,basicAnimationSpeed=600,fastAnimationSpeed=200,scrollTimer,directorShowreelVideos=$(".director-showreel-video"),directorShowreelLength=directorShowreelVideos.length,directorStills=$(".still"),directorStillsLength=directorStills.length,sidebar=$("#sidebar"),sidebarButton=$("#sidebar-toggle"),tagFilters=$(".filter-tag"),tagFilterTimeout,tagFilterTimeout2,clickedMenuItem,overlayImage={viewer:$("#image-overlay-viewer"),overlay:$("#image-overlay"),overlayInner:$("#image-overlay-inner"),overlayDirector:$("#image-overlay-director"),overlayTitle:$("#image-overlay-title"),timeout:0,load:function(e,i,t){var a=this;e.attr("max-width","100%").removeAttr("width").removeAttr("height"),a.overlay.fadeIn(fastAnimationSpeed).data("now-playing",t),a.viewer.html(e),a.overlayDirector.html(i.director),0!==i.caption.length?a.overlayTitle.html(i.caption):a.overlayTitle.html("&nbsp"),a.fixHeight(),$(window).resize(function(){a.fixHeight()})},next:function(){var e=this.overlay.data("now-playing"),i=e+1;if(directorStillsLength>i){var t=directorStills.eq(i).children(".full-still").clone();this.load(t,directorStills.eq(i).data(),i)}else{var t=directorStills.eq(0).children(".full-still").clone();this.load(t,directorStills.eq(0).data(),0)}},prev:function(){var e=this.overlay.data("now-playing"),i=e-1;if(i===-1){var t=directorStills.eq(directorStillsLength-1).children(".full-still").clone();this.load(t,directorStills.eq(directorStillsLength-1).data(),directorStillsLength-1)}else{var t=directorStills.eq(i).children(".full-still").clone();this.load(t,directorStills.eq(i).data(),i)}},close:function(){this.overlay.fadeOut(fastAnimationSpeed).data("now-playing",""),this.viewer.html("")},fixHeight:function(){this.overlayInner.height("auto"),this.overlayInner.width("80%");for(var e=$(window).height(),i=this.overlayInner.height();i>.95*e;)this.overlayInner.width(.95*this.overlayInner.width()),i=this.overlayInner.height()}},overlayVimeoPlayer={player:$("#video-overlay-player"),overlay:$("#video-overlay"),overlayInner:$("#video-overlay-inner"),overlayDirector:$("#video-overlay-director"),overlayTitle:$("#video-overlay-title"),overlayMiddot:$("#video-overlay-middot"),overlayBrand:$("#video-overlay-brand"),timeout:0,load:function(e,i){var t,a=this;t=void 0===e.videoRatio?.5625:e.videoRatio,a.overlay.fadeIn(fastAnimationSpeed).data("now-playing",i),a.player.html('<iframe id="overlay-vimeo-player-embed" src="//player.vimeo.com/video/'+e.vimeoId+'?api=1&autoplay=1&badge=0&byline=0&portrait=0&player_id=overlay-vimeo-player-embed" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>').css({"padding-top":100*t+"%"}),a.overlayDirector.html(e.director),a.overlayTitle.html(e.title),a.overlayBrand.html(e.brand),a.overlayMiddot.show(),""!==e.title&&""!==e.brand||a.overlayMiddot.hide(),a.timeout=setTimeout(function(){a.fixHeight()},basicAnimationSpeed+fastAnimationSpeed+1),$(window).resize(function(){this.timeout=setTimeout(function(){a.fixHeight()},50)});var o=$("#overlay-vimeo-player-embed")[0],n=$f(o);n.addEvent("ready",function(){n.addEvent("finish",function(){a.playNext()})})},playNext:function(){var e=this.overlay.data("now-playing"),i=e+1;directorShowreelLength>i?this.load(directorShowreelVideos.eq(i).data(),i):this.load(directorShowreelVideos.eq(0).data(),0)},playPrev:function(){var e=this.overlay.data("now-playing"),i=e-1;i===-1?this.load(directorShowreelVideos.eq(directorShowreelLength-1).data(),directorShowreelLength-1):this.load(directorShowreelVideos.eq(i).data(),i)},close:function(){this.overlay.fadeOut(fastAnimationSpeed).data("now-playing",""),this.player.html("")},fixHeight:function(){for(var e=$(window).height(),i=this.overlayInner.height();i>.95*e;)this.overlayInner.width(.95*this.overlayInner.width()),i=this.overlayInner.height()}},inlineVimeoPlayer={player:$("#vimeo-player"),inlineTitle:$("#inline-title"),inlineBrand:$("#inline-brand"),inlineMiddot:$("#inline-middot"),load:function(e){this.player=$("#vimeo-player"),this.inlineTitle=$("#inline-title"),this.inlineBrand=$("#inline-brand"),this.inlineMiddot=$("#inline-middot");var i=e.data(),t=i.videoRatio;void 0===t&&(t=.5625),this.inlineTitle.html(i.title),this.inlineBrand.html(i.brand),this.inlineMiddot.show(),""!==i.title&&""!==i.brand||this.inlineMiddot.hide(),this.player.data("now-playing-id",e[0].id).html('<iframe id="inline-vimeo-player-embed" src="//player.vimeo.com/video/'+i.vimeoId+'?api=1&autoplay=1&badge=0&byline=0&portrait=0&player_id=inline-vimeo-player-embed" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>').css({"padding-top":100*t+"%"}),$("html").addClass("cinema-mode"),$(window).scrollTo($("#main-content"),basicAnimationSpeed);var a=$("#inline-vimeo-player-embed")[0],o=$f(a);o.addEvent("ready",function(){o.addEvent("finish",function(){inlineVimeoPlayer.playNext()})})},playNext:function(){var e,i=this.player.data("now-playing-id"),t=$(".director-showreel-video:visible").parent("a"),a=t.length;t.each(function(t,a){i===$(a).children(".video")[0].id&&(e=t)}),void 0===e||e===a-1?window.location.hash=$(t[0]).attr("href").slice(1):window.location.hash=$(t[e+1]).attr("href").slice(1)},playPrev:function(){var e,i=this.player.data("now-playing-id"),t=$(".director-showreel-video:visible").parent("a"),a=t.length;t.each(function(t,a){i===$(a).children(".video")[0].id&&(e=t)}),void 0===e?window.location.hash=$(t[0]).attr("href").slice(1):0===e?window.location.hash=$(t[a-1]).attr("href").slice(1):window.location.hash=$(t[e-1]).attr("href").slice(1)},close:function(){$("html").removeClass("cinema-mode"),$("#now-playing-title").html(""),this.player.html("").css({"padding-top":"0%"}).data("now-playing","")}};$(document).ready(function(){if($(".js-ajax-director").on({click:function(e){e.preventDefault();var i=e.currentTarget.href;clickedMenuItem=$(this).parent(),$.ajax(i,{beforeSend:function(){ajaxBefore()},dataType:"html",error:function(e,i,t){ajaxErrorHandler(e,i,t)},success:function(e){ajaxDirectorSuccess(e,i)}})}}),$(".js-ajax-index").on({click:function(e){e.preventDefault();var i=e.currentTarget.href;clickedMenuItem=$(this).parent(),$.ajax(i,{beforeSend:function(){ajaxBefore()},dataType:"html",error:function(e,i,t){ajaxErrorHandler(e,i,t)},success:function(e){ajaxIndexSuccess(e,i)}})}}),$(".js-ajax-page").on({click:function(e){e.preventDefault();var i=e.currentTarget.href;clickedMenuItem=$(this).parent(),$.ajax(i,{beforeSend:function(){ajaxBefore()},dataType:"html",error:function(e,i,t){ajaxErrorHandler(e,i,t)},success:function(e){ajaxPageSuccess(e,i)}})}}),layoutFixSearchInput(),postsInit(),sidebarInit(),$(".js-lazy-background").length&&lazyLoadBackgrounds(),$(".webm-background-container").length){videoBackgrounds();var e;$(window).on("resize",function(i){clearTimeout(e),e=setTimeout(function(){videoBackgrounds()},500)})}$("body").hasClass("single-director")&&directorInit(),$("#map-canvas").length&&google.maps.event.addDomListener(window,"load",initializeMap)});
//# sourceMappingURL=/main.min.js.map